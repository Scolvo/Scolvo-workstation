import {
  /mhub/workplace/CreateWorkplace,
  /mhub/repository/WorkplaceRepository
}

function displayWorkplacesPage(originId) {
  var data = {
    "WorkplacesPage": {
      "WorkplacesList": createWorkplacesListData()
    }
  };
  display(WorkplacesPage, data, originId);
}

function createWorkplacesListData() {
  return getWorkplaces().map(function (workplaceDao) {
    return {
      "id": workplaceDao.id,
      "name": workplaceDao.name,
      "team": resolveTeam(workplaceDao.teamId)
    };
  });
}

page WorkplacesPage {
  layout: vertical;
  template: general;
  scolvoMenuVisible: true;
  settingsVisible: true;

  list WorkplacesList {
    template: normal;
    itemTemplate: defaultItem;
    span: 24;
    filterVisible: true;
    actions: [
      CreateWorkplace
    ]
    columns: [
      name,
      team
    ]
  }
}

function onWorkplacesPageLoaded(originId) {}

function onCreateWorkplace(originId) {
  displayCreateWorkplacePage(originId);
}
